@if (hit(); as hit) {
  <div
    class="grid gap-4 mb-2 rounded-lg border-l-8 -left-8 border-transparent hover:border-primary-500">
    <a
      class="flex flex-row gap-4"
      routerLink="/metadata/{{ hit._id }}"
      title="{{ hit._source.resourceAbstractObject?.default }}">
      <div class="flex-none w-48 h-48 relative border border-gray-300">
        <g-record-field-overview
          [field]="hit._source.overview?.[0]"
          preview="false" />

        <g-record-field-resource-type
          [field]="hit._source.resourceType"
          [layout]="ResourceTypeLayout.ICON_WITH_BADGE"
          class="absolute bottom-0 left-0 m-2" />
      </div>
      <div class="flex-grow">
        <div
          class="text-2xl font-semibold line-clamp-1"
          title="{{ hit._source.resourceTitleObject?.default }}">
          {{ hit._source.resourceTitleObject?.default }}
        </div>
        <div class="">
          <p class="line-clamp-2">
            {{ hit._source.resourceAbstractObject?.default | firstSentence }}
          </p>
          <div>
            <g-record-field-keywords [field]="hit._source.tag" limit="3" />

            @for (range of hit._source.resourceTemporalDateRange; track range) {
              <p-chip
                class="pr-2"
                icon="fa fa-calendar"
                label="{{ range | gRecordFieldRange: 'YYYY-MM-dd' }}">
              </p-chip>
            }
          </div>
          <div>
            @for (link of hit._source.link; track $index) {
              @if (link.protocol.startsWith('OGC:WMS')) {
                <p-button
                  icon="fa fa-map"
                  size="small"
                  (onClick)="addWmsLayers([link]); $event.preventDefault()"
                  [title]="'Add to map (' + link.nameObject?.default + ')'">
                </p-button>
              }
            }
          </div>
        </div>
      </div>
    </a>
  </div>
}
