@if (agg()) {
  @if (isLabelDisplayed() === true) {
    <div class="font-bold mb-2 border-b-2">{{ aggregation() }}</div>
  }

  <div [ngClass]="cssClass()">
    @switch (currentLayout()) {
      @case (SearchAggLayout.MULTISELECT) {
        <g-search-agg-multiselect
          [scope]="scope()"
          [buckets]="agg().buckets"
          [field]="searchField"
          [aggregationConfig]="aggregationConfig" />
      }
      @case (SearchAggLayout.SELECT_BUTTON) {
        <g-search-agg-select-button
          [scope]="scope()"
          [buckets]="agg().buckets"
          [field]="searchField"
          [aggregationConfig]="aggregationConfig" />
      }
      @default {
        @for (bucket of agg().buckets; track bucket.key) {
          <g-search-agg-item
            [scope]="scope()"
            [bucket]="bucket"
            [field]="searchField"
            [layout]="currentLayout()"
            [aggregationConfig]="aggregationConfig"
            (onAggItemChange)="filter($event)" />
        }
      }
    }
  </div>
}
