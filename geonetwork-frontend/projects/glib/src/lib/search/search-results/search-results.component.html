<!--@defer (on viewport) {-->
@if (search) {
  <g-search-results-error [error]="search.error()" />
  @if (search.response(); as response) {
    <p-dataView #dv [value]="response.hits.hits" emptyMessage=" ">
      <ng-template pTemplate="list" let-hits>
        <div [class]="layoutClass()">
          @for (hit of hits; track hit._id) {
            @switch (layout()) {
              @case (ResultsLayout.CARD) {
                <g-record-view-card
                  [hit]="hit"
                  [landingPage]="landingPage()"
                  [landingPageLinkPath]="landingPageLinkPath()" />
              }
              @default {
                <g-record-view-list [hit]="hit" />
              }
            }
          }
        </div>
      </ng-template>
    </p-dataView>

    @if (search.isSearching()) {
      @for (i of [].constructor(search.pageSize()); track $index) {
        <div class="grid gap-4 mb-2">
          <div class="flex flex-row gap-4">
            <p-skeleton
              size="10rem"
              styleClass="flex-none w-48 h-48 relative rounded-lg border border-gray-300" />
            <div>
              <p-skeleton styleClass="mb-2" />
              <p-skeleton width="10rem" styleClass="mb-2" />
              <p-skeleton width="5rem" styleClass="mb-2" />
            </div>
          </div>
        </div>
      }
    }
  }
}
<!--} @placeholder {
  <p>Loading...</p>
}-->
