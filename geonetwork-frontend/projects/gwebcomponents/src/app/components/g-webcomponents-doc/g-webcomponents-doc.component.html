<div class="px-4">
  @switch (webcomponentId()) {
    @case ('gc-data-results-table') {
      <div class="h-30">
        <h2 class="text-3xl">Data preview with webcomponents</h2>
      </div>

      <div class="text-2x font-bold">Browse CSV file</div>

      <p-fieldset
        legend="Configure component"
        [toggleable]="true"
        collapsed="true">
        <div class="flex gap-2">
          <div class="w-full">
            <p-floatLabel class="m-2">
              <p-dropdown
                styleClass="w-full"
                [(ngModel)]="selectedSourceFile"
                [options]="csvSourceFiles" />
              <label>Choose a sample file</label>
            </p-floatLabel>

            <p-floatLabel class="m-2">
              <input
                type="text"
                pInputText
                [(ngModel)]="selectedSourceFile"
                class="w-full" />
              <label>CSV file URL</label>
            </p-floatLabel>

            <div class="">
              <label for="allowDataTableExport" class="text-xs">
                Enable CSV export
              </label>
              <p-inputSwitch
                inputId="allowDataTableExport"
                [(ngModel)]="allowDataTableExport" />
            </div>
          </div>
        </div>
      </p-fieldset>

      <gc-data-results-table
        [source]="selectedSourceFile()"
        [export]="allowDataTableExport()"
        class="w-full"></gc-data-results-table>

      <g-webcomponents-doc-embed>
        <pre class="whitespace-pre-wrap">
<![CDATA[<gc-data-results-table-component source="{{
            selectedSourceFile()
          }}" export="{{
            allowDataTableExport()
          }}" class="w-full"></gc-data-results-table-component>
]]>
        </pre>
      </g-webcomponents-doc-embed>
    }
    @case ('gc-search-results') {
      <div class="h-30">
        <h2 class="text-3xl">Search box and results</h2>
      </div>

      <div class="m-4">
        <g-webcomponent-configuration
          [(apiUrl)]="apiUrl"
          [(fullTextSearch)]="fullTextSearch"
          [(searchFilter)]="searchFilter"
          [(pageSize)]="pageSize"
          [(selectionMode)]="selectionMode"
          [(selectedFilters)]="selectedFilters">
        </g-webcomponent-configuration>

        <gc-search
          [api-url]="apiUrl"
          [full-text-search]="fullTextSearch()"
          landing-page="${apiUrl}/records/${uuid}"
          [filter]="searchFilter()"
          [size]="pageSize()"
          [list-of-filter]="listOfFilters()" />

        <g-webcomponents-doc-embed>
          <pre class="whitespace-pre-wrap">
<![CDATA[ <gc-search-component
            api-url="{{ apiUrl }}"
            full-text-search="{{ fullTextSearch() }}"
            filter="{{ searchFilter() }}"
            size="{{ pageSize() }}"
            list-of-filter="{{ listOfFilters() }}"
          />
]]>
          </pre>
        </g-webcomponents-doc-embed>
      </div>
    }
    @default {
      <div class="h-30">
        <h2 class="text-3xl">Table of records</h2>
      </div>

      <div class="mb-4">
        <g-webcomponent-configuration
          [(apiUrl)]="apiUrl"
          [(fullTextSearch)]="fullTextSearch"
          [(searchFilter)]="searchFilter"
          [(pageSize)]="pageSize"
          [(selectionMode)]="selectionMode"
          [(selectedFilters)]="selectedFilters">
          <div>
            <p-floatLabel class="m-2">
              <p-autoComplete
                styleClass="w-full"
                [suggestions]="filteredFields"
                [dropdown]="true"
                optionValue="path"
                optionLabel="label"
                (completeMethod)="autocompleteField($event)"
                (onSelect)="autocompleteAddValue($event)"
                (onKeyUp)="autocompleteKeyboardEvent($event)"
                [ngModel]="listOfFieldsAsText()" />
              <label for="tableColumn">Select table columns</label>
            </p-floatLabel>

            <p-floatLabel class="m-2">
              <input
                type="text"
                class="w-full"
                pInputText
                [(ngModel)]="listOfLabelsAsText" />
              <label for="tableColumn">Define column label</label>
            </p-floatLabel>

            <div class="">
              <label for="allowResultsTableExport" class="text-xs">
                Enable CSV export
              </label>
              <p-inputSwitch
                inputId="allowResultsTableExport"
                [(ngModel)]="allowResultsTableExport" />
            </div>
          </div>
        </g-webcomponent-configuration>
      </div>

      <gc-search-results-table
        [api-url]="apiUrl"
        [full-text-search]="fullTextSearch()"
        [filter]="searchFilter()"
        [size]="pageSize()"
        [list-of-label]="listOfLabelsAsText()"
        [list-of-field]="listOfFieldsAsText()"
        [list-of-filter]="listOfFilters()"
        [export]="allowResultsTableExport()"
        landing-page="${apiUrl}/records/${uuid}"
        landing-page-link-on="resourceTitleObject.default"
        scroll-height="80vh"
        [selection-mode]="selectionMode" />

      <g-webcomponents-doc-embed>
        <pre class="whitespace-pre-wrap">
<![CDATA[<gc-search-results-table-component
          api-url="{{ apiUrl }}"
          full-text-search="{{ fullTextSearch() }}"
          filter="{{ searchFilter() }}"
          size="{{ pageSize() }}"
          list-of-label="{{ listOfLabelsAsText() }}"
          list-of-field="{{ listOfFieldsAsText() }}"
          list-of-filter="{{ listOfFilters() }}"
          export="{{ allowResultsTableExport() }}"
          landing-page="${apiUrl}/records/${uuid}"
          landing-page-llink-on="resourceTitleObject.default"
          scroll-height="80vh"
          selection-mode="{{ selectionMode }}" />
]]>
        </pre>
      </g-webcomponents-doc-embed>
    }
  }
</div>
